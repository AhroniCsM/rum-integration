{"ast":null,"code":"import { INITIAL_SNAPSHOT_CONTEXT, SNAPSHOT_MANAGER_KEY } from './snapshot.consts';\nimport { getNowTime } from '../utils/time';\nexport class SnapshotManager {\n  constructor() {\n    this.updateSnapshot = overrides => {\n      this._currentSnapshot = Object.assign(Object.assign({}, this._currentSnapshot), overrides);\n    };\n    this.resetSnapshot = () => {\n      this._currentSnapshot = Object.assign(Object.assign({}, INITIAL_SNAPSHOT_CONTEXT), {\n        timestamp: getNowTime()\n      });\n      this._fragmentsState = new Set();\n      this._isSnapshotSentDueToRecording = false;\n    };\n    window[SNAPSHOT_MANAGER_KEY] = this;\n    this.resetSnapshot();\n  }\n  get fragmentsState() {\n    return this._fragmentsState;\n  }\n  get currentSnapshot() {\n    return this._currentSnapshot;\n  }\n  get isSnapshotSentDueToRecording() {\n    return this._isSnapshotSentDueToRecording;\n  }\n  set isSnapshotSentDueToRecording(value) {\n    this._isSnapshotSentDueToRecording = value;\n  }\n}","map":{"version":3,"names":["INITIAL_SNAPSHOT_CONTEXT","SNAPSHOT_MANAGER_KEY","getNowTime","SnapshotManager","constructor","updateSnapshot","overrides","_currentSnapshot","Object","assign","resetSnapshot","timestamp","_fragmentsState","Set","_isSnapshotSentDueToRecording","window","fragmentsState","currentSnapshot","isSnapshotSentDueToRecording","value"],"sources":["../../../../../libs/browser/src/snapshot/snapshotManager.ts"],"sourcesContent":[null],"mappings":"AACA,SACEA,wBAAwB,EACxBC,oBAAoB,QACf,mBAAmB;AAC1B,SAASC,UAAU,QAAQ,eAAe;AAE1C,OAAM,MAAOC,eAAe;EAO1BC,YAAA;IAqBA,KAAAC,cAAc,GAAIC,SAAmC,IAAU;MAC7D,IAAI,CAACC,gBAAgB,GAAAC,MAAA,CAAAC,MAAA,CAAAD,MAAA,CAAAC,MAAA,KAChB,IAAI,CAACF,gBAAgB,GACrBD,SAAS,CACb;IACH,CAAC;IAED,KAAAI,aAAa,GAAG,MAAW;MACzB,IAAI,CAACH,gBAAgB,GAAAC,MAAA,CAAAC,MAAA,CAAAD,MAAA,CAAAC,MAAA,KAChBT,wBAAwB;QAC3BW,SAAS,EAAET,UAAU;MAAE,EACxB;MAED,IAAI,CAACU,eAAe,GAAG,IAAIC,GAAG,EAAU;MACxC,IAAI,CAACC,6BAA6B,GAAG,KAAK;IAC5C,CAAC;IAnCCC,MAAM,CAACd,oBAAoB,CAAC,GAAG,IAAI;IACnC,IAAI,CAACS,aAAa,EAAE;EACtB;EAEA,IAAIM,cAAcA,CAAA;IAChB,OAAO,IAAI,CAACJ,eAAe;EAC7B;EAEA,IAAIK,eAAeA,CAAA;IACjB,OAAO,IAAI,CAACV,gBAAgB;EAC9B;EAEA,IAAIW,4BAA4BA,CAAA;IAC9B,OAAO,IAAI,CAACJ,6BAA6B;EAC3C;EAEA,IAAII,4BAA4BA,CAACC,KAAc;IAC7C,IAAI,CAACL,6BAA6B,GAAGK,KAAK;EAC5C","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}