{"ast":null,"code":"import { FetchInstrumentation } from '@opentelemetry/instrumentation-fetch';\nimport { CoralogixAttributes } from '../constants';\nimport { CoralogixEventType } from '../types';\nimport { CoralogixLogSeverity } from '../types-external';\nimport { propagateTraceHeaderCorsUrls } from '../CoralogixPropgator';\nimport { isNetworkError } from '../utils';\nexport var FetchSource;\n(function (FetchSource) {\n  FetchSource[\"FETCH\"] = \"fetch\";\n})(FetchSource || (FetchSource = {}));\nexport class CoralogixFetchInstrumentation extends FetchInstrumentation {\n  constructor(config) {\n    propagateTraceHeaderCorsUrls(config);\n    config.applyCustomAttributesOnSpan = (span, request, result) => {\n      const {\n        status\n      } = result;\n      span.setAttributes({\n        [CoralogixAttributes.SEVERITY]: isNetworkError(status) ? CoralogixLogSeverity.Error : CoralogixLogSeverity.Info,\n        [CoralogixAttributes.EVENT_TYPE]: CoralogixEventType.NETWORK_REQUEST,\n        [CoralogixAttributes.SOURCE]: FetchSource.FETCH\n      });\n    };\n    super(config);\n  }\n  enable() {\n    super.enable();\n  }\n}","map":{"version":3,"names":["FetchInstrumentation","CoralogixAttributes","CoralogixEventType","CoralogixLogSeverity","propagateTraceHeaderCorsUrls","isNetworkError","FetchSource","CoralogixFetchInstrumentation","constructor","config","applyCustomAttributesOnSpan","span","request","result","status","setAttributes","SEVERITY","Error","Info","EVENT_TYPE","NETWORK_REQUEST","SOURCE","FETCH","enable"],"sources":["../../../../../libs/browser/src/instrumentations/CoralogixFetchInstrumentation.ts"],"sourcesContent":[null],"mappings":"AAAA,SACEA,oBAAoB,QAEf,sCAAsC;AAC7C,SAASC,mBAAmB,QAAQ,cAAc;AAClD,SAASC,kBAAkB,QAAQ,UAAU;AAC7C,SAASC,oBAAoB,QAAQ,mBAAmB;AACxD,SAASC,4BAA4B,QAAQ,uBAAuB;AACpE,SAASC,cAAc,QAAQ,UAAU;AAEzC,WAAYC,WAEX;AAFD,WAAYA,WAAW;EACrBA,WAAA,mBAAe;AACjB,CAAC,EAFWA,WAAW,KAAXA,WAAW;AAIvB,OAAM,MAAOC,6BAA8B,SAAQP,oBAAoB;EACrEQ,YAAYC,MAAkC;IAC5CL,4BAA4B,CAACK,MAAM,CAAC;IAEpCA,MAAM,CAACC,2BAA2B,GAAG,CAACC,IAAI,EAAEC,OAAO,EAAEC,MAAM,KAAI;MAC7D,MAAM;QAAEC;MAAM,CAAE,GAAGD,MAAM;MAEzBF,IAAI,CAACI,aAAa,CAAC;QACjB,CAACd,mBAAmB,CAACe,QAAQ,GAAGX,cAAc,CAACS,MAAM,CAAC,GAClDX,oBAAoB,CAACc,KAAK,GAC1Bd,oBAAoB,CAACe,IAAI;QAC7B,CAACjB,mBAAmB,CAACkB,UAAU,GAAGjB,kBAAkB,CAACkB,eAAe;QACpE,CAACnB,mBAAmB,CAACoB,MAAM,GAAGf,WAAW,CAACgB;OAC3C,CAAC;IACJ,CAAC;IAED,KAAK,CAACb,MAAM,CAAC;EACf;EAESc,MAAMA,CAAA;IACb,KAAK,CAACA,MAAM,EAAE;EAChB","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}