{"ast":null,"code":"import { MASK_CLASS_DEFAULT, MASK_INPUT_TYPES_DEFAULT, OPTIONS_DEFAULTS, REQUIRED_CONFIG_KEYS } from './constants';\nimport { isNil } from './utils/general';\nimport { resolveSessionConfig, resolveSessionRecordingConfig } from './session/session.helper';\nfunction isInitialConfigValid(initConfig) {\n  if (!initConfig) {\n    console.warn('CoralogixRum: Initialization configuration missing');\n    return;\n  }\n  // Ensure public key is provided when no proxy URL is set\n  if (!initConfig.proxyUrl && !initConfig.public_key) {\n    console.warn('CoralogixRum: Public key is missing');\n    return;\n  }\n  for (const requiredProp of REQUIRED_CONFIG_KEYS) {\n    if (isNil(initConfig[requiredProp])) {\n      console.error(`CoralogixRum: Initialization aborted. Please provide the required property \"${requiredProp}\".`);\n      return;\n    }\n  }\n  return true;\n}\nexport function validateAndResolveInitConfig(config) {\n  var _a, _b, _c;\n  if (!isInitialConfigValid(config)) {\n    return;\n  }\n  const {\n    ignoreUrls,\n    urlBlueprinters\n  } = config;\n  const resolvedIgnoreUrls = [];\n  ignoreUrls && resolvedIgnoreUrls.push(...ignoreUrls);\n  OPTIONS_DEFAULTS.ignoreUrls && resolvedIgnoreUrls.push(...OPTIONS_DEFAULTS.ignoreUrls);\n  return Object.assign(Object.assign(Object.assign({}, OPTIONS_DEFAULTS), config), {\n    maskInputTypes: (_a = config.maskInputTypes) !== null && _a !== void 0 ? _a : MASK_INPUT_TYPES_DEFAULT,\n    maskClass: (_b = config.maskClass) !== null && _b !== void 0 ? _b : MASK_CLASS_DEFAULT,\n    ignoreUrls: resolvedIgnoreUrls,\n    urlBlueprinters: resolveUrlBlueprinters(urlBlueprinters),\n    sessionSampleRate: (_c = config.sessionSampleRate) !== null && _c !== void 0 ? _c : 100,\n    sessionConfig: resolveSessionConfig(config.sessionConfig),\n    sessionRecordingConfig: resolveSessionRecordingConfig(config.sessionRecordingConfig)\n  });\n}\nfunction resolveUrlBlueprinters(urlBlueprinters) {\n  if (!urlBlueprinters) {\n    return OPTIONS_DEFAULTS.urlBlueprinters;\n  }\n  const resolvedUrlBlueprinters = {\n    pageUrlBlueprinters: [],\n    networkUrlBlueprinters: []\n  };\n  const concatBlueprinters = urlBlueprinters => {\n    const {\n      pageUrlBlueprinters,\n      networkUrlBlueprinters\n    } = urlBlueprinters || {};\n    if (pageUrlBlueprinters) {\n      resolvedUrlBlueprinters.pageUrlBlueprinters.push(...pageUrlBlueprinters);\n    }\n    if (networkUrlBlueprinters) {\n      resolvedUrlBlueprinters.networkUrlBlueprinters.push(...networkUrlBlueprinters);\n    }\n  };\n  concatBlueprinters(urlBlueprinters);\n  if (OPTIONS_DEFAULTS.urlBlueprinters) {\n    concatBlueprinters(OPTIONS_DEFAULTS.urlBlueprinters);\n  }\n  return resolvedUrlBlueprinters;\n}","map":{"version":3,"names":["MASK_CLASS_DEFAULT","MASK_INPUT_TYPES_DEFAULT","OPTIONS_DEFAULTS","REQUIRED_CONFIG_KEYS","isNil","resolveSessionConfig","resolveSessionRecordingConfig","isInitialConfigValid","initConfig","console","warn","proxyUrl","public_key","requiredProp","error","validateAndResolveInitConfig","config","ignoreUrls","urlBlueprinters","resolvedIgnoreUrls","push","Object","assign","maskInputTypes","_a","maskClass","_b","resolveUrlBlueprinters","sessionSampleRate","_c","sessionConfig","sessionRecordingConfig","resolvedUrlBlueprinters","pageUrlBlueprinters","networkUrlBlueprinters","concatBlueprinters"],"sources":["../../../../libs/browser/src/configuration.ts"],"sourcesContent":[null],"mappings":"AACA,SACEA,kBAAkB,EAClBC,wBAAwB,EACxBC,gBAAgB,EAChBC,oBAAoB,QACf,aAAa;AACpB,SAASC,KAAK,QAAQ,iBAAiB;AACvC,SACEC,oBAAoB,EACpBC,6BAA6B,QACxB,0BAA0B;AAEjC,SAASC,oBAAoBA,CAC3BC,UAAqC;EAErC,IAAI,CAACA,UAAU,EAAE;IACfC,OAAO,CAACC,IAAI,CAAC,oDAAoD,CAAC;IAClE;;EAGF;EACA,IAAI,CAACF,UAAU,CAACG,QAAQ,IAAI,CAACH,UAAU,CAACI,UAAU,EAAE;IAClDH,OAAO,CAACC,IAAI,CAAC,qCAAqC,CAAC;IACnD;;EAGF,KAAK,MAAMG,YAAY,IAAIV,oBAAoB,EAAE;IAC/C,IAAIC,KAAK,CAACI,UAAU,CAACK,YAAY,CAAC,CAAC,EAAE;MACnCJ,OAAO,CAACK,KAAK,CACX,+EAA+ED,YAAY,IAAI,CAChG;MACD;;;EAIJ,OAAO,IAAI;AACb;AAEA,OAAM,SAAUE,4BAA4BA,CAC1CC,MAAiC;;EAEjC,IAAI,CAACT,oBAAoB,CAACS,MAAM,CAAC,EAAE;IACjC;;EAGF,MAAM;IAAEC,UAAU;IAAEC;EAAe,CAAE,GAAGF,MAAM;EAE9C,MAAMG,kBAAkB,GAAG,EAAE;EAE7BF,UAAU,IAAIE,kBAAkB,CAACC,IAAI,CAAC,GAAGH,UAAU,CAAC;EAEpDf,gBAAgB,CAACe,UAAU,IACzBE,kBAAkB,CAACC,IAAI,CAAC,GAAGlB,gBAAgB,CAACe,UAAU,CAAC;EAEzD,OAAAI,MAAA,CAAAC,MAAA,CAAAD,MAAA,CAAAC,MAAA,CAAAD,MAAA,CAAAC,MAAA,KACKpB,gBAAgB,GAChBc,MAAM;IACTO,cAAc,EAAE,CAAAC,EAAA,GAAAR,MAAM,CAACO,cAAc,cAAAC,EAAA,cAAAA,EAAA,GAAIvB,wBAAwB;IACjEwB,SAAS,EAAE,CAAAC,EAAA,GAAAV,MAAM,CAACS,SAAS,cAAAC,EAAA,cAAAA,EAAA,GAAI1B,kBAAkB;IACjDiB,UAAU,EAAEE,kBAAkB;IAC9BD,eAAe,EAAES,sBAAsB,CAACT,eAAe,CAAC;IACxDU,iBAAiB,EAAE,CAAAC,EAAA,GAAAb,MAAM,CAACY,iBAAiB,cAAAC,EAAA,cAAAA,EAAA,GAAI,GAAG;IAClDC,aAAa,EAAEzB,oBAAoB,CAACW,MAAM,CAACc,aAAa,CAAC;IACzDC,sBAAsB,EAAEzB,6BAA6B,CACnDU,MAAM,CAACe,sBAAsB;EAC9B;AAEL;AAEA,SAASJ,sBAAsBA,CAC7BT,eAA4C;EAE5C,IAAI,CAACA,eAAe,EAAE;IACpB,OAAOhB,gBAAgB,CAACgB,eAAgB;;EAG1C,MAAMc,uBAAuB,GAAoB;IAC/CC,mBAAmB,EAAE,EAAE;IACvBC,sBAAsB,EAAE;GACzB;EAED,MAAMC,kBAAkB,GAAIjB,eAAgC,IAAI;IAC9D,MAAM;MAAEe,mBAAmB;MAAEC;IAAsB,CAAE,GACnDhB,eAAe,IAAI,EAAE;IAEvB,IAAIe,mBAAmB,EAAE;MACvBD,uBAAuB,CAACC,mBAAoB,CAACb,IAAI,CAAC,GAAGa,mBAAmB,CAAC;;IAG3E,IAAIC,sBAAsB,EAAE;MAC1BF,uBAAuB,CAACE,sBAAuB,CAACd,IAAI,CAClD,GAAGc,sBAAsB,CAC1B;;EAEL,CAAC;EAEDC,kBAAkB,CAACjB,eAAe,CAAC;EAEnC,IAAIhB,gBAAgB,CAACgB,eAAe,EAAE;IACpCiB,kBAAkB,CAACjC,gBAAgB,CAACgB,eAAe,CAAC;;EAGtD,OAAOc,uBAAuB;AAChC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}