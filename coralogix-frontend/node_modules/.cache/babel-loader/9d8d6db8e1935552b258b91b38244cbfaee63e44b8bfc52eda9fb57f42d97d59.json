{"ast":null,"code":"import { getSdkConfig } from './helpers';\nimport { CoralogixDomainsApiUrlMap, PROXY_CX_FORWARD_PARAMETER } from './constants';\nexport class Request {\n  constructor(requestConfig) {\n    this.requestConfig = requestConfig;\n    this.resolvedUrl = '';\n    this.resolvedHeaders = {};\n    this.init();\n  }\n  init() {\n    const {\n      proxyUrl,\n      coralogixDomain,\n      public_key\n    } = getSdkConfig();\n    const {\n      suffix,\n      headers\n    } = this.requestConfig;\n    const cxEndpoint = `${CoralogixDomainsApiUrlMap[coralogixDomain]}${suffix}`;\n    this.resolvedUrl = proxyUrl ? `${proxyUrl}?${PROXY_CX_FORWARD_PARAMETER}=${encodeURIComponent(cxEndpoint)}` : cxEndpoint;\n    if (public_key) {\n      headers['Authorization'] = `Bearer ${public_key}`;\n    }\n    this.resolvedHeaders = headers;\n  }\n  send(body) {\n    return fetch(this.resolvedUrl, {\n      method: 'POST',\n      headers: this.resolvedHeaders,\n      body\n    }).catch(e => {\n      return e;\n    });\n  }\n}","map":{"version":3,"names":["getSdkConfig","CoralogixDomainsApiUrlMap","PROXY_CX_FORWARD_PARAMETER","Request","constructor","requestConfig","resolvedUrl","resolvedHeaders","init","proxyUrl","coralogixDomain","public_key","suffix","headers","cxEndpoint","encodeURIComponent","send","body","fetch","method","catch","e"],"sources":["../../../../libs/browser/src/Request.ts"],"sourcesContent":[null],"mappings":"AAAA,SAASA,YAAY,QAAQ,WAAW;AACxC,SACEC,yBAAyB,EACzBC,0BAA0B,QACrB,aAAa;AAOpB,OAAM,MAAOC,OAAO;EAGlBC,YAAoBC,aAA4B;IAA5B,KAAAA,aAAa,GAAbA,aAAa;IAFzB,KAAAC,WAAW,GAAW,EAAE;IACxB,KAAAC,eAAe,GAAgB,EAAE;IAEvC,IAAI,CAACC,IAAI,EAAE;EACb;EAEQA,IAAIA,CAAA;IACV,MAAM;MAAEC,QAAQ;MAAEC,eAAe;MAAEC;IAAU,CAAE,GAAGX,YAAY,EAAE;IAChE,MAAM;MAAEY,MAAM;MAAEC;IAAO,CAAE,GAAG,IAAI,CAACR,aAAa;IAE9C,MAAMS,UAAU,GAAG,GAAGb,yBAAyB,CAACS,eAAe,CAAC,GAAGE,MAAM,EAAE;IAE3E,IAAI,CAACN,WAAW,GAAGG,QAAQ,GACvB,GAAGA,QAAQ,IAAIP,0BAA0B,IAAIa,kBAAkB,CAC7DD,UAAU,CACX,EAAE,GACHA,UAAU;IAEd,IAAIH,UAAU,EAAE;MACdE,OAAO,CAAC,eAAe,CAAC,GAAG,UAAUF,UAAU,EAAE;;IAGnD,IAAI,CAACJ,eAAe,GAAGM,OAAO;EAChC;EAEOG,IAAIA,CAACC,IAAc;IACxB,OAAOC,KAAK,CAAC,IAAI,CAACZ,WAAW,EAAE;MAC7Ba,MAAM,EAAE,MAAM;MACdN,OAAO,EAAE,IAAI,CAACN,eAAe;MAC7BU;KACD,CAAC,CAACG,KAAK,CAAEC,CAAC,IAAI;MACb,OAAOA,CAAC;IACV,CAAC,CAAC;EACJ","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}