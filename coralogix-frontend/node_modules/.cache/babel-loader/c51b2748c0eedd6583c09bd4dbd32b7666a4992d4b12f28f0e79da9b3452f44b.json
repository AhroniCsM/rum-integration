{"ast":null,"code":"import { addEventListeners } from '../tools/addEventListener';\nexport class SessionIdle {\n  constructor(idleConfig) {\n    this.idleConfig = idleConfig;\n    this._isIdleActive = false;\n    this.stopCallbacks = {};\n    this.resetTimeout = () => {\n      var _a, _b;\n      (_b = (_a = this.stopCallbacks).clearTimeout) === null || _b === void 0 ? void 0 : _b.call(_a);\n      const id = setTimeout(() => {\n        this._isIdleActive = true;\n        this.idleConfig.onIdle();\n      }, this.idleConfig.timeoutDelay);\n      this.stopCallbacks.clearTimeout = () => clearTimeout(id);\n    };\n    this.idlenessEventsHandler = () => {\n      if (this._isIdleActive) {\n        this._isIdleActive = false;\n        this.idleConfig.onActive();\n      }\n      this.resetTimeout();\n    };\n  }\n  get isIdleActive() {\n    return this._isIdleActive;\n  }\n  startIdleListener() {\n    this.resetTimeout();\n    this.trackActivity();\n  }\n  stopIdleListener() {\n    Object.values(this.stopCallbacks).forEach(cb => cb());\n  }\n  trackActivity() {\n    var _a, _b;\n    (_b = (_a = this.stopCallbacks).removeActivityListeners) === null || _b === void 0 ? void 0 : _b.call(_a);\n    const {\n      stop\n    } = addEventListeners(window, [\"touchstart\" /* DOM_EVENT.TOUCH_START */, \"keydown\" /* DOM_EVENT.KEY_DOWN */, \"mousemove\" /* DOM_EVENT.MOUSE_MOVE */], this.idlenessEventsHandler, {\n      capture: true,\n      passive: true\n    });\n    this.stopCallbacks.removeActivityListeners = stop;\n  }\n}","map":{"version":3,"names":["addEventListeners","SessionIdle","constructor","idleConfig","_isIdleActive","stopCallbacks","resetTimeout","_b","_a","clearTimeout","call","id","setTimeout","onIdle","timeoutDelay","idlenessEventsHandler","onActive","isIdleActive","startIdleListener","trackActivity","stopIdleListener","Object","values","forEach","cb","removeActivityListeners","stop","window","capture","passive"],"sources":["../../../../../libs/browser/src/session/session-idle.ts"],"sourcesContent":[null],"mappings":"AAAA,SAASA,iBAAiB,QAAmB,2BAA2B;AAaxE,OAAM,MAAOC,WAAW;EAKtBC,YAAoBC,UAA6B;IAA7B,KAAAA,UAAU,GAAVA,UAAU;IAJtB,KAAAC,aAAa,GAAY,KAAK;IAE9B,KAAAC,aAAa,GAAkB,EAAE;IAiBjC,KAAAC,YAAY,GAAG,MAAK;;MAC1B,CAAAC,EAAA,IAAAC,EAAA,OAAI,CAACH,aAAa,EAACI,YAAY,cAAAF,EAAA,uBAAAA,EAAA,CAAAG,IAAA,CAAAF,EAAA,CAAI;MAEnC,MAAMG,EAAE,GAAGC,UAAU,CAAC,MAAK;QACzB,IAAI,CAACR,aAAa,GAAG,IAAI;QACzB,IAAI,CAACD,UAAU,CAACU,MAAM,EAAE;MAC1B,CAAC,EAAE,IAAI,CAACV,UAAU,CAACW,YAAY,CAAC;MAEhC,IAAI,CAACT,aAAa,CAACI,YAAY,GAAG,MAAMA,YAAY,CAACE,EAAE,CAAC;IAC1D,CAAC;IAeO,KAAAI,qBAAqB,GAAG,MAAK;MACnC,IAAI,IAAI,CAACX,aAAa,EAAE;QACtB,IAAI,CAACA,aAAa,GAAG,KAAK;QAC1B,IAAI,CAACD,UAAU,CAACa,QAAQ,EAAE;;MAE5B,IAAI,CAACV,YAAY,EAAE;IACrB,CAAC;EA7CmD;EAEpD,IAAIW,YAAYA,CAAA;IACd,OAAO,IAAI,CAACb,aAAa;EAC3B;EAEUc,iBAAiBA,CAAA;IACzB,IAAI,CAACZ,YAAY,EAAE;IACnB,IAAI,CAACa,aAAa,EAAE;EACtB;EAEUC,gBAAgBA,CAAA;IACxBC,MAAM,CAACC,MAAM,CAAC,IAAI,CAACjB,aAAa,CAAC,CAACkB,OAAO,CAAEC,EAAE,IAAKA,EAAE,EAAE,CAAC;EACzD;EAaQL,aAAaA,CAAA;;IACnB,CAAAZ,EAAA,IAAAC,EAAA,OAAI,CAACH,aAAa,EAACoB,uBAAuB,cAAAlB,EAAA,uBAAAA,EAAA,CAAAG,IAAA,CAAAF,EAAA,CAAI;IAE9C,MAAM;MAAEkB;IAAI,CAAE,GAAG1B,iBAAiB,CAChC2B,MAAM,EACN,sHAAiE,EACjE,IAAI,CAACZ,qBAAqB,EAC1B;MAAEa,OAAO,EAAE,IAAI;MAAEC,OAAO,EAAE;IAAI,CAAE,CACjC;IAED,IAAI,CAACxB,aAAa,CAACoB,uBAAuB,GAAGC,IAAI;EACnD","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}