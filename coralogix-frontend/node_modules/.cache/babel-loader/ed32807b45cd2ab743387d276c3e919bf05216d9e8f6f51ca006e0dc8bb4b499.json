{"ast":null,"code":"import { InstrumentationBase } from '@opentelemetry/instrumentation';\nimport { CoralogixAttributes } from '../constants';\nimport { CoralogixEventType } from '../types';\nimport { getSdkConfig } from '../helpers';\nimport { getCircularReplacer } from '../utils';\nexport const CUSTOM_INSTRUMENTATION_VERSION = '1';\nexport var LogSource;\n(function (LogSource) {\n  LogSource[\"CODE\"] = \"code\";\n})(LogSource || (LogSource = {}));\nexport class CoralogixCustomLogInstrumentation extends InstrumentationBase {\n  constructor(config) {\n    var _a;\n    super(CoralogixEventType.LOG, CUSTOM_INSTRUMENTATION_VERSION, config);\n    this.stringifyCustomLogData = (_a = getSdkConfig()) === null || _a === void 0 ? void 0 : _a.stringifyCustomLogData;\n  }\n  init() {}\n  disable() {}\n  enable() {}\n  log(severity, message, data) {\n    const span = this.tracer.startSpan(CoralogixEventType.LOG);\n    span.setAttribute(CoralogixAttributes.EVENT_TYPE, CoralogixEventType.LOG);\n    span.setAttribute(CoralogixAttributes.SOURCE, LogSource.CODE);\n    span.setAttribute(CoralogixAttributes.SEVERITY, severity);\n    span.setAttribute(CoralogixAttributes.LOG, JSON.stringify({\n      severity,\n      message,\n      data: this.stringifyCustomLogData ? JSON.stringify(data, getCircularReplacer()) : data\n    }));\n    span.end();\n  }\n}","map":{"version":3,"names":["InstrumentationBase","CoralogixAttributes","CoralogixEventType","getSdkConfig","getCircularReplacer","CUSTOM_INSTRUMENTATION_VERSION","LogSource","CoralogixCustomLogInstrumentation","constructor","config","LOG","stringifyCustomLogData","_a","init","disable","enable","log","severity","message","data","span","tracer","startSpan","setAttribute","EVENT_TYPE","SOURCE","CODE","SEVERITY","JSON","stringify","end"],"sources":["../../../../../libs/browser/src/instrumentations/CoralogixCustomLogInstrumentation.ts"],"sourcesContent":[null],"mappings":"AAAA,SACEA,mBAAmB,QAEd,gCAAgC;AACvC,SAASC,mBAAmB,QAAQ,cAAc;AAElD,SAASC,kBAAkB,QAAQ,UAAU;AAC7C,SAASC,YAAY,QAAQ,YAAY;AACzC,SAASC,mBAAmB,QAAQ,UAAU;AAE9C,OAAO,MAAMC,8BAA8B,GAAG,GAAG;AAEjD,WAAYC,SAEX;AAFD,WAAYA,SAAS;EACnBA,SAAA,iBAAa;AACf,CAAC,EAFWA,SAAS,KAATA,SAAS;AAIrB,OAAM,MAAOC,iCAAkC,SAAQP,mBAAmB;EAIxEQ,YAAYC,MAA6B;;IACvC,KAAK,CAACP,kBAAkB,CAACQ,GAAG,EAAEL,8BAA8B,EAAEI,MAAM,CAAC;IAJ/D,KAAAE,sBAAsB,GAC5B,CAAAC,EAAA,GAAAT,YAAY,EAAE,cAAAS,EAAA,uBAAAA,EAAA,CAAED,sBAAsB;EAIxC;EAEAE,IAAIA,CAAA,GAAU;EAELC,OAAOA,CAAA,GAAI;EAEXC,MAAMA,CAAA,GAAI;EAEnBC,GAAGA,CAACC,QAA8B,EAAEC,OAAe,EAAEC,IAAU;IAC7D,MAAMC,IAAI,GAAG,IAAI,CAACC,MAAM,CAACC,SAAS,CAACpB,kBAAkB,CAACQ,GAAG,CAAC;IAE1DU,IAAI,CAACG,YAAY,CAACtB,mBAAmB,CAACuB,UAAU,EAAEtB,kBAAkB,CAACQ,GAAG,CAAC;IACzEU,IAAI,CAACG,YAAY,CAACtB,mBAAmB,CAACwB,MAAM,EAAEnB,SAAS,CAACoB,IAAI,CAAC;IAC7DN,IAAI,CAACG,YAAY,CAACtB,mBAAmB,CAAC0B,QAAQ,EAAEV,QAAQ,CAAC;IAEzDG,IAAI,CAACG,YAAY,CACftB,mBAAmB,CAACS,GAAG,EACvBkB,IAAI,CAACC,SAAS,CAAC;MACbZ,QAAQ;MACRC,OAAO;MACPC,IAAI,EAAE,IAAI,CAACR,sBAAsB,GAC7BiB,IAAI,CAACC,SAAS,CAACV,IAAI,EAAEf,mBAAmB,EAAE,CAAC,GAC3Ce;KACL,CAAC,CACH;IAEDC,IAAI,CAACU,GAAG,EAAE;EACZ","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}